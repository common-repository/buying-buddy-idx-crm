<?phpif ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly   /*Plugin Name: Buying Buddy IDX CRMPlugin URI: https://buyingbuddy.com/wordpress-idx-plugin.phpDescription: Real estate IDX shortcode components that add MLS property search, map-search, properties, marketing content and lead capture to posts and pages on any theme.Author: Buying BuddyVersion: 1.1.12Revision: PublicContributors: buyingbuddydevAuthor URI: https://buyingbuddy.com*/$buyingbuddy_version = "1.1.12";require_once esc_html(dirname( __FILE__ )) . '/class/BuyingBuddy.php'; require_once esc_html(dirname( __FILE__ )) . '/includes/functions.php';require_once esc_html(dirname( __FILE__ )) . '/includes/shortcodes.php';require_once esc_html(dirname( __FILE__ )) . '/includes/settings.php';/* Initialise $wp_query if it doesn't exist */global $wp_query, $buyingbuddy_version;if ( empty( $wp_query ) ) {    $wp_query = new WP_Query();}/* Actions on activating BB Plugin */register_activation_hook(__FILE__,"buyingbuddy_plugin_activation");/* Actions on deactivating BB Plugin */register_deactivation_hook(__FILE__,"buyingbuddy_plugin_deactivation");  /* Get BB Options from WordPress */$buyingbuddy_options = sanitize_text_field(get_option("buyingbuddy_options"));if (!empty($buyingbuddy_options)) $buyingbuddy_options = unserialize($buyingbuddy_options);else  $buyingbuddy_options = array();$buyingbuddy_acid = sanitize_text_field(get_option("buyingbuddy_acid"));$buyingbuddydetails = "false";if (empty($buyingbuddy_options["acid"])) $buyingbuddy_options["acid"] = $buyingbuddy_acid;if (empty($buyingbuddy_options["api_key"])) $buyingbuddy_options["api_key"] = "";if (empty($buyingbuddy_options["express"])) $buyingbuddy_options["express"] = "";$options = array (    "acid" => $buyingbuddy_options["acid"]   );if (sanitize_text_field($buyingbuddy_options['express']) == "yes")  $options['subdomain'] = 'active';$buyingbuddyObj = new BuyingBuddy($options);              /* Initialize Plugin */add_action("init", "buyingbuddy_plugin_init",1);add_action('admin_init', 'buyingbuddy_plugin_settings_redirect');//add_action('admin_init', 'buyingbuddy_check_settings');/* Check caches */add_filter("wp_head", "buyingbuddy_check_account_cache");/* Load BB Library */add_action("wp_enqueue_scripts","buyingbuddy_load_scripts");add_action("admin_enqueue_scripts","buyingbuddy_load_admin_scripts");/* Load SEO for Property Details page */add_action("parse_query","buyingbuddy_property_details");/* Disable OG Tags from Yoast on Property Details page */add_action('wp_head', 'buyingbuddy_remove_yoast_og', 1);/* BB Shortcodes */add_shortcode("mbb_widget", "buyingbuddy_widget_shortcode");add_shortcode("mbb_lookup", "buyingbuddy_lookup_shortcode");/*Allow MBB Shortcodes in WordPress Sidebar widgets */add_filter('widget_text','do_shortcode');add_filter('plugin_action_links_' . esc_html(plugin_basename(__FILE__)), 'buyingbuddy_plugin_page_links' );?>